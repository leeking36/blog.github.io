---
layout: post
title: 代码规范
anchor: blog06
excerpt: EditorConfig、Eslint、Prettier、Stylelint
update: 2023 年 09 月 19 日
---

## ESLint 代码检测

### 安装 ESLint 插件

`VSCode 插件市场搜索 ESLint 插件并安装`

### 安装 ESLint 依赖

- 方法 1：创建 vue 项目时，顺便下载 ESLint 依赖。
- 方法 2：`npm i -D eslint`

### ESLint 配置

#### .eslintrc.cjs

执行命令完成 ESLint 配置初始化：`npx eslint --init`

<img src="https://leeking36.github.io/images/v2-c6a225e04c85f389b3cf18cb506b60d7_r.jpg" width="50%">

根目录自动生成的 .eslintrc.cjs 配置内容如下：

```javascript
module.exports = {
  env: {
    es2021: true,
    node: true,
  },
  extends: [
    "eslint:recommended",
    "plugin:vue/vue3-essential",
    "plugin:@typescript-eslint/recommended",
  ],
  overrides: [],
  parser: "@typescript-eslint/parser",
  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
  },
  plugins: ["vue", "@typescript-eslint"],
  rules: {},
};
```

#### 解析器配置

在默认配置基础上需要修改解析器为 vue-eslint-parser ，不然在检测执行中出现 error Parsing error: '>' expected 的解析错误，修改 .eslintrc.cjs 如下：

<img src="https://leeking36.github.io/images/v2-f792e69ae7b8765fbc904a8899d7a483_r.jpg" width="50%">

#### .eslintignore

根目录新建 .eslintignore 文件，添加忽略文件， ESLint 校验会忽略这些文件，配置如下：

```json
dist
node_modules
public

src/assets

.eslintrc.cjs
.prettierrc.cjs
.stylelintrc.cjs
```

#### 检测指令

package.json 添加 eslint 检测指令：

```json
"scripts": {
  "lint:eslint": "eslint \"src/**/*.{vue,ts,js}\" --fix"
}
```

执行命令进行 ESLint 检测：

`npm run lint:eslint`

#### 保存自动检测

打开 File → Preferences → Settings 搜索 Editor: Code Actions On Save 选择 Workspace 标签设置工作区，点击 Edit in settings.json：

```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true // 开启eslint自动检测
  }
}
```
